# 1-1 从 Minecraft 到 Bukkit

## Minecraft 的 C/S 架构

### 多人游戏的运作

不仅仅是 Minecraft，绝大多数多人游戏的实现，都是通过连接到一台**中央服务器**上，由客户端完成显示等工作，由服务端完成实际的游戏逻辑处理，两者之间通过网络传输信息。

### 服务端世界的复制品

在 Minecraft 的客户端和服务端**都有各自的一个世界**，它们相对独立地运作。

只有当有事件发生时，客户端或者服务端才会发送数据包，接收数据包的一方根据数据包内容更新自己的世界。

## 插件运行的原理

### 插件并不是破解软件

插件**并没有对客户端进行任何修改**，所有修改的都是针对服务端，用于实现新的逻辑，客户端还是那个世界。

*可以认为，插件**激发了客户端的潜能**，由此让游戏更有趣。*

譬如登录插件，你可能会想，那些登录指令是哪里来的呢？明明客户端根本就没有这样的指令嘛。

但是，当你输入 `/login` 命令并按下回车后，Minecraft 实际上做了这样几件事：

1. 客户端检测到命令，进行**语法检查**，这一步只进行了最基本的检查，例如是否以 `/` 开头
2. 客户端将命令打包为数据包发送
3. 服务端接收到数据包，由于服务端已经被修改，服务端可以按照插件的意愿工作，登录插件被调用，它验证玩家的信息

*实际上命令的处理到这里就结束了。你看到的登录成功的信息是服务端通过发送消息向你呈现的，这（在客户端）和命令处理没有直接关联。*

通过以上步骤，登录插件激发了客户端「使用 `/login` 命令」的潜能，实际上只是利用了 Minecraft 的一个机制。

### 修改后的 Minecraft 服务端

原版服务端是不支持插件的，但有些开发者对其进行了修改，使得插件可以被加载。

到目前为止，使用**最广泛**、运行**最稳定**、功能**最丰富**，版本**最兼容**……（此处省略一万字）的服务端，是 Bukkit 家族的服务端，它们也被称为**纯净插件服**，而与之相对应的是 Sponge 家族的**Mod 服**。

大多数 Mod 服在游玩前必须单独安装客户端，这给切换服务器和版本更新增加了难度，而纯净插件服使用原版客户端就能正常游玩，而且不需要安装额外的客户端，安全、快速、便捷，现已成为最受欢迎的多人游戏方式。