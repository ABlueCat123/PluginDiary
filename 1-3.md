# 1-3 准备出发

?> **阅读指导**<br/>如已阅读 TR-1-1，则无需阅读本章。

## JDK 11

无论哪种插件开发，若非版本需要，请使用 JDK 11。它是大多数服务端核心指定的 JDK 版本。本教程使用的 JDK 是 OpenJDK 11.0.10。

你可以从 [清华大学 AdoptOpenJDK 镜像站](https://mirror.tuna.tsinghua.edu.cn/AdoptOpenJDK/11/jdk/) 下载合适的 OpenJDK。

*该链接已经为你选择好了版本和类型（JDK），你只需要选择架构和系统就可下载了。**下载前请仔细阅读各个文件的名称**！*

## 合适的 IDE

虽然我在 Mod 开发中不止一次要求新手使用 IDEA，但在插件开发方面我从未这样要求过。这是因为插件开发更接近经典 Java 项目，也**适合用来学习编程**（虽然本教程目的不在此）。相比之下，Mod 开发的一大堆配置太过于复杂了。插件开发拥有更高的自由度，而且可以随心所欲使用需要的工具（例如 Maven）。

如果你有合适的 IDE，那就还接着用它吧，如果没有，可以从 [JetBrains 官网](https://www.jetbrains.com/zh-cn/idea/download/) 下载免费的 IntelliJ IDEA 社区版。

*该网站的打开不是很快，请耐心等一下。下载完成后安装即可。*

## 服务端软件

### 选择服务端

选择一个合适的服务端用于开发。

常见的插件服务端基本上都是 Bukkit/Spigot 兼容端，因此你可以根据自身情况选择：

- 如果你是服主或准备当服主：

  先选择服务端，Paper、Spigot、Arclight 等都是很不错的选择。在考虑插件之前，先考虑功能和性能。

  记住：**适合你服务器的服务端才是最好的**。如果你的服务端恰巧不是 Bukkit/Spigot 兼容端，那也别勉强，Mod 服同样是很有趣的。

- 如果你是服务器技术：

  听从你服主的安排，如果你的服务器用的不是 Bukkit/Spigot 兼容端，那很遗憾，别勉强，学习学习你的服务端吧。

- 如果你是原创插件开发者：

  可以使用 Paper 或 Spigot，Spigot 的获取比较简单，而 Paper 可以在你调试时提供更好的性能。

- 如果你是插件重制开发者：

  使用原先插件开发所用的服务端。当然，如果原来的插件不是 Bukkit/Spigot 兼容插件……等一下，**那你为什么会在这里**？

### 开发依赖即是服务端核心

你使用的服务端核心即为开发依赖，这是插件开发和 Mod 开发的一大区别。

对于 Bukkit、Spigot 等服务端，**服务端根目录下唯一的 Jar 文件**即为服务端核心。（多数名为 `spigot-xxxx.jar` 或者什么别的）

Paper 稍有不同（这也是我钟爱她的原因之一），她的文件夹根目录下并不是真正的核心，因为 Paper 整合了安装程序和运行代码，真正的核心位于服务端根目录下的 `cache` 文件夹中，名为 `patched_xxxx.jar`。

如果你不是独立原创开发，现在向服主/合作伙伴/原开发者索要服务端吧！

?> **现在行动**<br/>下面的内容是针对**独立原创插件开发者**准备的，如果你不是，那么你可以现在离开，我们在下一章会合！

好的，我们接下来介绍服务端的获取方法……

### Spigot 的获取

获取 Spigot 相当简单，前往 [GetBukkit](https://getbukkit.org) 下载即可。

*虽然这不是 Spigot 官方建议的方法，但我们只是开发，没必要那么在乎调试环境的安全和性能。*

本教程使用的版本为 1.16.5，如果你要选择旧版本，建议你的版本**高于 1.13**，如果不是，也许代码仍然可以正常运行，也许会出现奇怪的错误……可别说我没提前告诉你哦~

*1.13 之后的 Minecraft 进行了许多修改，Bukkit API 做了许多努力保持 API 的一致性，但是……还是建议别冒险。1.12.2 也快被淘汰了，为什么不使用更高的版本呢？*

### Paper 的获取和构建

!> **注意！**<br/>对于大多数插件开发（包括本教程），Spigot 已经足够了，介绍 Paper 只是因为 Paper 的优化更好，如果你在（或者打算）使用 Paper，才需要阅读下列内容。如果你只是想开发一个 Bukkit/Spigot 兼容插件，那你可以拿着 `spigot-xxxx.jar` 离开了。下一章见！

从 [PaperMC 下载页面](https://papermc.io/downloads) 下载最新的构建，下载后会得到一个 Jar 文件。

使用 Java 运行该文件，Paper 会自动完成服务端的下载与构建工作。**这一步可能需要很长的时间**，耐心等待。

```
java -jar paper-<版本号>.jar
```

*如果你实在无法等待，你可以去 Minecraft 官网下载最新的服务端软件（使用 IDM 等进行加速）并手动粘贴到  Paper 生成的 `cache` 文件夹下，改名为 `mojang_<版本号>.jar`，此处的版本号应当和 Minecraft 版本号一致，例如 `mojang_1.16.5.jar`。当然，如果你又不想等又不想折腾……那就拿上 Spigot 走人吧！*

等你看到类似于这样的信息：

```
[00:00:00 INFO]: You need to agree to the EULA in order to run the server. Go to eula.txt for more info.
```

好了，Paper 的工作完成了，现在找到 `patched_xxxx.jar`，复制它，一切就完成了。

---

你还可以从 [MCBBS](https://www.mcbbs.net) 的「服务端整合包」版获得一些资源。